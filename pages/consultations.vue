<template>
  <div class="bg-neutral-cream min-h-screen">
    <!-- Hero Section -->
    <section class="container-site py-16 md:py-24">
      <div class="max-w-content mx-auto text-center">
        <h1 class="text-3xl md:text-4xl font-bold mb-6">
          Expert Website Consultations
        </h1>
        <p class="text-lg mb-8">
          Get professional advice and strategic insights to improve your online
          presence.
        </p>
        <div class="flex justify-center">
          <a href="#booking" class="btn-primary">Book a Consultation</a>
          <a href="#services" class="btn-outline ml-4">Explore Services</a>
        </div>
      </div>
    </section>

    <!-- Services Section -->
    <section id="services" class="bg-primary-light py-16">
      <div class="container-site">
        <h2 class="text-2xl md:text-3xl font-semibold text-center mb-12">
          Our Consultation Services
        </h2>

        <div class="grid md:grid-cols-2 gap-8">
          <div class="card card-hover bg-white">
            <div class="card-body">
              <div class="flex items-center mb-4">
                <div
                  class="w-12 h-12 rounded-full bg-accent-light flex items-center justify-center text-accent-dark"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-6 w-6"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                    />
                  </svg>
                </div>
                <h3 class="ml-4 font-semibold text-xl">Website Audit</h3>
              </div>
              <p>
                A comprehensive review of your existing website to identify
                strengths, weaknesses, and opportunities for improvement. Our
                audit covers:
              </p>
              <ul class="mt-4 space-y-2">
                <li class="flex items-start">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5 text-accent-500 mr-2 mt-0.5"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M5 13l4 4L19 7"
                    />
                  </svg>
                  <span>Performance analysis and optimization suggestions</span>
                </li>
                <li class="flex items-start">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5 text-accent-500 mr-2 mt-0.5"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M5 13l4 4L19 7"
                    />
                  </svg>
                  <span>UX/UI evaluation and improvement recommendations</span>
                </li>
                <li class="flex items-start">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5 text-accent-500 mr-2 mt-0.5"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M5 13l4 4L19 7"
                    />
                  </svg>
                  <span>SEO assessment and keyword strategy</span>
                </li>
                <li class="flex items-start">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5 text-accent-500 mr-2 mt-0.5"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M5 13l4 4L19 7"
                    />
                  </svg>
                  <span>Security and compliance review</span>
                </li>
              </ul>
              <div class="mt-6">
                <a href="#booking" class="btn-primary btn-sm">Book an Audit</a>
              </div>
            </div>
          </div>

          <div class="card card-hover bg-white">
            <div class="card-body">
              <div class="flex items-center mb-4">
                <div
                  class="w-12 h-12 rounded-full bg-accent-light flex items-center justify-center text-accent-dark"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-6 w-6"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"
                    />
                  </svg>
                </div>
                <h3 class="ml-4 font-semibold text-xl">SEO Strategy</h3>
              </div>
              <p>
                Develop a tailored search engine optimization strategy to
                increase your visibility and drive organic traffic. Our SEO
                consultation includes:
              </p>
              <ul class="mt-4 space-y-2">
                <li class="flex items-start">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5 text-accent-500 mr-2 mt-0.5"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M5 13l4 4L19 7"
                    />
                  </svg>
                  <span>Keyword research and competitive analysis</span>
                </li>
                <li class="flex items-start">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5 text-accent-500 mr-2 mt-0.5"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M5 13l4 4L19 7"
                    />
                  </svg>
                  <span>On-page and off-page optimization plan</span>
                </li>
                <li class="flex items-start">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5 text-accent-500 mr-2 mt-0.5"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M5 13l4 4L19 7"
                    />
                  </svg>
                  <span>Content strategy and recommendations</span>
                </li>
                <li class="flex items-start">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5 text-accent-500 mr-2 mt-0.5"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M5 13l4 4L19 7"
                    />
                  </svg>
                  <span>Local SEO optimization for businesses</span>
                </li>
              </ul>
              <div class="mt-6">
                <a href="#booking" class="btn-primary btn-sm"
                  >Book SEO Consultation</a
                >
              </div>
            </div>
          </div>

          <div class="card card-hover bg-white">
            <div class="card-body">
              <div class="flex items-center mb-4">
                <div
                  class="w-12 h-12 rounded-full bg-accent-light flex items-center justify-center text-accent-dark"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-6 w-6"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                    />
                  </svg>
                </div>
                <h3 class="ml-4 font-semibold text-xl">
                  Conversion Optimization
                </h3>
              </div>
              <p>
                Transform your website visitors into customers with targeted
                conversion rate optimization. Our CRO consultation includes:
              </p>
              <ul class="mt-4 space-y-2">
                <li class="flex items-start">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5 text-accent-500 mr-2 mt-0.5"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M5 13l4 4L19 7"
                    />
                  </svg>
                  <span
                    >User journey mapping and friction point
                    identification</span
                  >
                </li>
                <li class="flex items-start">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5 text-accent-500 mr-2 mt-0.5"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M5 13l4 4L19 7"
                    />
                  </svg>
                  <span>Call-to-action optimization strategies</span>
                </li>
                <li class="flex items-start">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5 text-accent-500 mr-2 mt-0.5"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M5 13l4 4L19 7"
                    />
                  </svg>
                  <span
                    >A/B testing recommendations and implementation plan</span
                  >
                </li>
                <li class="flex items-start">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5 text-accent-500 mr-2 mt-0.5"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M5 13l4 4L19 7"
                    />
                  </svg>
                  <span>Form and checkout process optimization</span>
                </li>
              </ul>
              <div class="mt-6">
                <a href="#booking" class="btn-primary btn-sm"
                  >Book CRO Consultation</a
                >
              </div>
            </div>
          </div>

          <div class="card card-hover bg-white">
            <div class="card-body">
              <div class="flex items-center mb-4">
                <div
                  class="w-12 h-12 rounded-full bg-accent-light flex items-center justify-center text-accent-dark"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-6 w-6"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"
                    />
                  </svg>
                </div>
                <h3 class="ml-4 font-semibold text-xl">Digital Strategy</h3>
              </div>
              <p>
                Develop a comprehensive digital strategy that aligns with your
                business goals and maximizes your online potential. Our strategy
                consultation includes:
              </p>
              <ul class="mt-4 space-y-2">
                <li class="flex items-start">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5 text-accent-500 mr-2 mt-0.5"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M5 13l4 4L19 7"
                    />
                  </svg>
                  <span
                    >Business goal alignment and digital opportunity
                    identification</span
                  >
                </li>
                <li class="flex items-start">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5 text-accent-500 mr-2 mt-0.5"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M5 13l4 4L19 7"
                    />
                  </svg>
                  <span>Competitive landscape analysis</span>
                </li>
                <li class="flex items-start">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5 text-accent-500 mr-2 mt-0.5"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M5 13l4 4L19 7"
                    />
                  </svg>
                  <span>Channel strategy and marketing plan</span>
                </li>
                <li class="flex items-start">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5 text-accent-500 mr-2 mt-0.5"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M5 13l4 4L19 7"
                    />
                  </svg>
                  <span>Technology stack recommendations</span>
                </li>
              </ul>
              <div class="mt-6">
                <a href="#booking" class="btn-primary btn-sm"
                  >Book Strategy Session</a
                >
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section>
      <TestimonialComponent />
    </section>
    <!-- Process Section -->
    <section class="py-16 md:py-24">
      <div class="container-site">
        <h2 class="text-2xl md:text-3xl font-semibold text-center mb-4">
          Our Consultation Process
        </h2>
        <p class="text-center max-w-content mx-auto mb-12">
          We follow a structured approach to ensure you get maximum value from
          our consultations.
        </p>

        <div class="grid md:grid-cols-4 gap-8">
          <div class="text-center">
            <div
              class="w-16 h-16 rounded-full bg-primary-600 text-white flex items-center justify-center mx-auto mb-4 text-xl font-bold"
            >
              1
            </div>
            <h3 class="text-xl font-semibold mb-2">Discovery</h3>
            <p>
              We start by understanding your business goals, challenges, and
              current digital presence.
            </p>
          </div>

          <div class="text-center">
            <div
              class="w-16 h-16 rounded-full bg-primary-600 text-white flex items-center justify-center mx-auto mb-4 text-xl font-bold"
            >
              2
            </div>
            <h3 class="text-xl font-semibold mb-2">Analysis</h3>
            <p>
              Our experts conduct a thorough analysis of your website,
              competitors, and market opportunities.
            </p>
          </div>

          <div class="text-center">
            <div
              class="w-16 h-16 rounded-full bg-primary-600 text-white flex items-center justify-center mx-auto mb-4 text-xl font-bold"
            >
              3
            </div>
            <h3 class="text-xl font-semibold mb-2">Strategy</h3>
            <p>
              We develop customized recommendations and actionable strategies
              based on our findings.
            </p>
          </div>

          <div class="text-center">
            <div
              class="w-16 h-16 rounded-full bg-primary-600 text-white flex items-center justify-center mx-auto mb-4 text-xl font-bold"
            >
              4
            </div>
            <h3 class="text-xl font-semibold mb-2">Implementation</h3>
            <p>
              We guide you through implementing our recommendations or can
              handle the execution for you.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Booking Section -->
    <section id="booking" class="bg-accent-50 py-16">
      <div class="container-site">
        <div class="mx-auto">
          <h2 class="text-2xl md:text-3xl font-semibold text-center mb-8">
            Book Your Consultation
          </h2>

          <div ref="contactRoot" class="async-contact-form">
            <Suspense v-if="contactShouldLoad">
              <template #default>
                <AsyncContactForm />
              </template>
              <template #fallback>
                <div
                  class="flex items-center justify-center py-16"
                  aria-busy="true"
                >
                  <div
                    class="animate-spin h-8 w-8 border-4 border-primary-200 border-t-primary-500 rounded-full"
                  ></div>
                  <span class="sr-only">Loading contact form...</span>
                </div>
              </template>
            </Suspense>
            <noscript>
              <p class="text-sm text-neutral-600">
                Enable JavaScript to load the contact form.
              </p>
            </noscript>
          </div>
        </div>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="bg-accent-500 text-white py-16">
      <div class="container-site text-center">
        <h2 class="text-2xl md:text-3xl font-semibold mb-6">
          Ready to transform your online presence?
        </h2>
        <p class="text-lg mb-8 max-w-content mx-auto">
          Our expert consultations will help you identify opportunities and
          implement strategies that drive real results.
        </p>
        <div class="flex justify-center">
          <a
            href="#booking"
            class="btn-primary bg-white text-accent-600 hover:bg-neutral-50"
            >Book Now</a
          >
          <a
            href="#services"
            class="btn-outline border-white text-white hover:bg-accent-600 ml-4"
            >Explore Services</a
          >
        </div>
      </div>
    </section>
  </div>
</template>

<script setup>
import TestimonialComponent from '~/components/ui/TestimonialComponent.vue';
import {
  ref,
  onMounted,
  onBeforeUnmount,
  defineAsyncComponent,
  watchEffect,
} from 'vue';
const AsyncContactForm = defineAsyncComponent(
  () => import('@/components/forms/ContactForm.vue')
);
const contactShouldLoad = ref(false);
const contactRoot = ref(null);
let contactObserver;
const contactLoadIfIntersecting = entries => {
  entries.forEach(e => {
    if (e.isIntersecting) {
      contactShouldLoad.value = true;
      if (contactObserver) contactObserver.disconnect();
    }
  });
};
onMounted(() => {
  if ('IntersectionObserver' in window) {
    contactObserver = new IntersectionObserver(contactLoadIfIntersecting, {
      rootMargin: '200px 0px',
    });
    if (contactRoot.value) contactObserver.observe(contactRoot.value);
  } else {
    contactShouldLoad.value = true;
  }
});
onBeforeUnmount(() => {
  if (contactObserver) contactObserver.disconnect();
});
if (process.client) {
  watchEffect(() => {
    if (!contactShouldLoad.value && contactRoot.value) {
      const rect = contactRoot.value.getBoundingClientRect();
      if (rect.top < window.innerHeight + 200) {
        contactShouldLoad.value = true;
        if (contactObserver) contactObserver.disconnect();
      }
    }
  });
}
</script>
